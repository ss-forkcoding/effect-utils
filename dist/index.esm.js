const t=function(t,e){if("function"==typeof t)return function(){return t(arguments)?e.apply(this,arguments):t=>e(t,...arguments)};switch(t){case 0:case 1:throw new RangeError(`Invalid arity ${t}`);case 2:return function(t,r){return arguments.length>=2?e(t,r):function(r){return e(r,t)}};case 3:return function(t,r,n){return arguments.length>=3?e(t,r,n):function(n){return e(n,t,r)}};case 4:return function(t,r,n,i){return arguments.length>=4?e(t,r,n,i):function(i){return e(i,t,r,n)}};case 5:return function(t,r,n,i,s){return arguments.length>=5?e(t,r,n,i,s):function(s){return e(s,t,r,n,i)}};default:return function(){if(arguments.length>=t)return e.apply(this,arguments);const r=arguments;return function(t){return e(t,...r)}}}},e=t=>t,r=t=>()=>t,n=r(!0),i=r(!1),s=r(void 0);function a(t,e,r,n,i,s,a,o,c){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return r(e(t));case 4:return n(r(e(t)));case 5:return i(n(r(e(t))));case 6:return s(i(n(r(e(t)))));case 7:return a(s(i(n(r(e(t))))));case 8:return o(a(s(i(n(r(e(t)))))));case 9:return c(o(a(s(i(n(r(e(t))))))));default:{let t=arguments[0];for(let e=1;e<arguments.length;e++)t=arguments[e](t);return t}}}const o=t=>(e,r)=>e===r||t(e,r),c=t(2,((t,e)=>o(((r,n)=>t(e(r),e(n))))));const u=()=>"3.13.10",l=`effect/GlobalValue/globalStoreId/${u()}`;let f;const h=(t,e)=>(f||(globalThis[l]??=new Map,f=globalThis[l]),f.has(t)||f.set(t,e()),f.get(t)),g=t=>"number"==typeof t,p=t=>"function"==typeof t,_=t=>(t=>"object"==typeof t&&null!==t)(t)||p(t),d=t(2,((t,e)=>_(t)&&e in t)),m=t(2,((t,e)=>d(t,"_tag")&&t._tag===e)),b=t=>null==t,y=t=>`BUG: ${t} - please report an issue at https://github.com/Effect-TS/effect/issues`;let v=class t{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new t(this.self)}};class S{_state;constructor(t,e,r,n){return b(e)&&b(t)?(e=4294967295*Math.random()>>>0,t=0):b(e)&&(e=t,t=0),b(n)&&b(r)?(n=this._state?this._state[3]:4150755663,r=this._state?this._state[2]:335903614):b(n)&&(n=r,r=0),this._state=new Int32Array([0,0,r>>>0,(1|(n||0))>>>0]),this._next(),w(this._state,this._state[0],this._state[1],t>>>0,e>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=1|t[3]}integer(t){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%t}number(){return(134217728*(1*(67108863&this._next()))+1*(134217727&this._next()))/9007199254740992}_next(){const t=this._state[0]>>>0,e=this._state[1]>>>0;!function(t,e,r,n,i){let s=(r>>>16)*(65535&i)>>>0,a=(65535&r)*(i>>>16)>>>0,o=(65535&r)*(65535&i)>>>0,c=(r>>>16)*(i>>>16)+((a>>>16)+(s>>>16))>>>0;a=a<<16>>>0,o=o+a>>>0,o>>>0<a>>>0&&(c=c+1>>>0);s=s<<16>>>0,o=o+s>>>0,o>>>0<s>>>0&&(c=c+1>>>0);c=c+Math.imul(r,n)>>>0,c=c+Math.imul(e,i)>>>0,t[0]=c,t[1]=o}(this._state,t,e,1481765933,1284865837),w(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let r=t>>>18,n=(e>>>18|t<<14)>>>0;r=(r^t)>>>0,n=(n^e)>>>0;const i=(n>>>27|r<<5)>>>0,s=t>>>27;return(i>>>s|i<<((-s>>>0&31)>>>0))>>>0}}function w(t,e,r,n,i){let s=e+n>>>0;const a=r+i>>>0;a>>>0<r>>>0&&(s=s+1|0),t[0]=s,t[1]=a}const k=Symbol.for("effect/Utils/YieldWrap");class N{#t;constructor(t){this.#t=t}[k](){return this.#t}}const O=h("effect/Utils/isStructuralRegion",(()=>({enabled:!1,tester:void 0}))),I=(t=>{const e={[t]:t=>t()};return function(r){return e[t](r)}})("effect_internal_function"),C=h(Symbol.for("effect/Hash/randomHashCache"),(()=>new WeakMap)),M=Symbol.for("effect/Hash"),E=t=>{if(!0===O.enabled)return 0;switch(typeof t){case"number":return J(t);case"bigint":return R(t.toString(10));case"boolean":case"symbol":return R(String(t));case"string":return R(t);case"undefined":return R("undefined");case"function":case"object":return null===t?R("null"):t instanceof Date?E(t.toISOString()):x(t)?t[M]():j(t);default:throw new Error(`BUG: unhandled typeof ${typeof t} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},j=t=>(C.has(t)||C.set(t,J(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),C.get(t)),A=t=>e=>53*e^t,$=t=>3221225471&t|t>>>1&1073741824,x=t=>d(t,M),J=t=>{if(t!=t||t===1/0)return 0;let e=0|t;for(e!==t&&(e^=4294967295*t);t>4294967295;)e^=t/=4294967295;return $(e)},R=t=>{let e=5381,r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return $(e)},T=t=>((t,e)=>{let r=12289;for(let n=0;n<e.length;n++)r^=a(R(e[n]),A(E(t[e[n]])));return $(r)})(t,Object.keys(t)),D=t=>{let e=6151;for(let r=0;r<t.length;r++)e=a(e,A(E(t[r])));return $(e)},F=function(){if(1===arguments.length){const t=arguments[0];return function(e){return Object.defineProperty(t,M,{value:()=>e,enumerable:!1}),e}}const t=arguments[0],e=arguments[1];return Object.defineProperty(t,M,{value:()=>e,enumerable:!1}),e},P=Symbol.for("effect/Equal");function L(){return 1===arguments.length?t=>B(t,arguments[0]):B(arguments[0],arguments[1])}function B(t,e){if(t===e)return!0;const r=typeof t;if(r!==typeof e)return!1;if("object"===r||"function"===r){if(null!==t&&null!==e){if(G(t)&&G(e))return!(E(t)!==E(e)||!t[P](e))||!(!O.enabled||!O.tester)&&O.tester(t,e);if(t instanceof Date&&e instanceof Date)return t.toISOString()===e.toISOString()}if(O.enabled){if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&t.every(((t,r)=>B(t,e[r])));if(Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const r=Object.keys(t),n=Object.keys(e);if(r.length===n.length){for(const n of r)if(!(n in e)||!B(t[n],e[n]))return!!O.tester&&O.tester(t,e);return!0}}return!!O.tester&&O.tester(t,e)}}return!(!O.enabled||!O.tester)&&O.tester(t,e)}const G=t=>d(t,P),z=()=>L,U=Symbol.for("nodejs.util.inspect.custom"),q=t=>{try{if(d(t,"toJSON")&&p(t.toJSON)&&0===t.toJSON.length)return t.toJSON();if(Array.isArray(t))return t.map(q)}catch(t){return{}}return Y(t)},W=t=>JSON.stringify(t,null,2),H=Symbol.for("effect/Inspectable/Redactable"),V=t=>"object"==typeof t&&null!==t&&H in t,X=h("effect/Inspectable/redactableState",(()=>({fiberRefs:void 0}))),Y=t=>V(t)&&void 0!==X.fiberRefs?t[H](X.fiberRefs):t,Z=(t,e)=>{switch(e.length){case 0:return t;case 1:return e[0](t);case 2:return e[1](e[0](t));case 3:return e[2](e[1](e[0](t)));case 4:return e[3](e[2](e[1](e[0](t))));case 5:return e[4](e[3](e[2](e[1](e[0](t)))));case 6:return e[5](e[4](e[3](e[2](e[1](e[0](t))))));case 7:return e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))));case 8:return e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t))))))));case 9:return e[8](e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))))));default:{let r=t;for(let t=0,n=e.length;t<n;t++)r=e[t](r);return r}}},K="Commit",Q="Failure",tt="Success",et="UpdateRuntimeFlags",rt=Symbol.for("effect/Effect"),nt=Symbol.for("effect/Stream"),it=Symbol.for("effect/Sink"),st=Symbol.for("effect/Channel"),at={_R:t=>t,_E:t=>t,_A:t=>t,_V:u()},ot={[rt]:at,[nt]:at,[it]:{_A:t=>t,_In:t=>t,_L:t=>t,_E:t=>t,_R:t=>t},[st]:{_Env:t=>t,_InErr:t=>t,_InElem:t=>t,_InDone:t=>t,_OutErr:t=>t,_OutElem:t=>t,_OutDone:t=>t},[P](t){return this===t},[M](){return F(this,j(this))},[Symbol.iterator](){return new v(new N(this))},pipe(){return Z(this,arguments)}},ct={[M](){return F(this,T(this))},[P](t){const e=Object.keys(this),r=Object.keys(t);if(e.length!==r.length)return!1;for(const r of e)if(!(r in t)||!L(this[r],t[r]))return!1;return!0}},ut={...ot,_op:K},lt=Symbol.for("effect/Option"),ft={...ot,[lt]:{_A:t=>t},[U](){return this.toJSON()},toString(){return W(this.toJSON())}},ht=Object.assign(Object.create(ft),{_tag:"Some",_op:"Some",[P](t){return _t(t)&&mt(t)&&L(this.value,t.value)},[M](){return F(this,A(E(this._tag))(E(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:q(this.value)}}}),gt=E("None"),pt=Object.assign(Object.create(ft),{_tag:"None",_op:"None",[P]:t=>_t(t)&&dt(t),[M]:()=>gt,toJSON(){return{_id:"Option",_tag:this._tag}}}),_t=t=>d(t,lt),dt=t=>"None"===t._tag,mt=t=>"Some"===t._tag,bt=Object.create(pt),yt=Symbol.for("effect/Either"),vt={...ot,[yt]:{_R:t=>t},[U](){return this.toJSON()},toString(){return W(this.toJSON())}},St=Object.assign(Object.create(vt),{_tag:"Right",_op:"Right",[P](t){return kt(t)&&Ot(t)&&L(this.right,t.right)},[M](){return A(E(this._tag))(E(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:q(this.right)}}}),wt=Object.assign(Object.create(vt),{_tag:"Left",_op:"Left",[P](t){return kt(t)&&Nt(t)&&L(this.left,t.left)},[M](){return A(E(this._tag))(E(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:q(this.left)}}}),kt=t=>d(t,yt),Nt=t=>"Left"===t._tag,Ot=t=>"Right"===t._tag,It=t=>{const e=Object.create(St);return e.right=t,e},Ct=t=>{const e=Object.create(wt);return e.left=t,e},Mt=kt,Et=Nt,jt=Ot,At=t(2,((t,{onLeft:e,onRight:r})=>Et(t)?e(t.left):r(t.right)))({onLeft:e,onRight:e}),$t=(t=>(e,r)=>e===r?0:t(e,r))(((t,e)=>t<e?-1:1)),xt=()=>bt,Jt=t=>{const e=Object.create(ht);return e.value=t,e},Rt=dt,Tt=mt,Dt=t(2,((t,{onNone:e,onSome:r})=>Rt(t)?e():r(t.value))),Ft=t(2,((t,e)=>Rt(t)?e():t.value)),Pt=Ft(s),Lt=t(2,((t,e)=>Rt(t)?xt():e(t.value))),Bt=(e=>t(2,((t,r)=>!Rt(t)&&e(t.value,r))))(z()),Gt=(...t)=>t,zt=t=>Array.isArray(t)?t:Array.from(t),Ut=t(2,((t,e)=>[e,...t])),qt=t(2,((t,e)=>[...t,e])),Wt=t=>0===t.length,Ht=t=>t.length>0,Vt=(t,e)=>t<0||t>=e.length,Xt=t(2,((t,e)=>{const r=Math.floor(e);return Vt(r,t)?xt():Jt(t[r])})),Yt=t(2,((t,e)=>{const r=Math.floor(e);if(Vt(r,t))throw new Error(`Index ${r} out of bounds`);return t[r]})),Zt=Xt(0),Kt=Yt(0),Qt=t=>t[t.length-1],te=t=>t.slice(1),ee=t=>Array.from(t).reverse(),re=t(2,((t,e)=>{const r=Array.from(t);return r.sort(e),r})),ne=t(2,((t,e)=>ie(t,e,Gt))),ie=t(3,((t,e,r)=>{const n=zt(t),i=zt(e);if(Ht(n)&&Ht(i)){const t=[r(Kt(n),Kt(i))],e=Math.min(n.length,i.length);for(let s=1;s<e;s++)t[s]=r(n[s],i[s]);return t}return[]})),se=t=>[t],ae=t(2,((t,e)=>t.map(e))),oe=t(2,((t,e)=>{if(Wt(t))return[];const r=[];for(let n=0;n<t.length;n++){const i=e(t[n],n);for(let t=0;t<i.length;t++)r.push(i[t])}return r}))(e),ce=t(3,((t,e,r)=>zt(t).reduce(((t,e,n)=>r(t,e,n)),e))),ue=(t,e)=>{const r=[];let n,i=t;for(;Tt(n=e(i));){const[t,e]=n.value;r.push(t),i=e}return r},le=t=>o(((e,r)=>{if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++){if(!t(e[n],r[n]))return!1}return!0})),fe=t(2,((t,e)=>zt(t).join(e))),he=$t,ge=Symbol.for("effect/Context/Tag"),pe=Symbol.for("effect/Context/Reference"),_e=Symbol.for("effect/STM"),de={...ot,_op:"Tag",[_e]:at,[ge]:{_Service:t=>t,_Identifier:t=>t},toString(){return W(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[U](){return this.toJSON()},of:t=>t,context(t){return we(this,t)}},me=Symbol.for("effect/Context"),be={[me]:{_Services:t=>t},[P](t){if(ve(t)&&this.unsafeMap.size===t.unsafeMap.size){for(const e of this.unsafeMap.keys())if(!t.unsafeMap.has(e)||!L(this.unsafeMap.get(e),t.unsafeMap.get(e)))return!1;return!0}return!1},[M](){return F(this,J(this.unsafeMap.size))},pipe(){return Z(this,arguments)},toString(){return W(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(q)}},[U](){return this.toJSON()}},ye=t=>{const e=Object.create(be);return e.unsafeMap=t,e},ve=t=>d(t,me),Se=ye(new Map),we=(t,e)=>ye(new Map([[t.key,e]])),ke=t(3,((t,e,r)=>{const n=new Map(t.unsafeMap);return n.set(e.key,r),ye(n)})),Ne=h("effect/Context/defaultValueCache",(()=>new Map)),Oe=t(2,((t,e)=>{if(!t.unsafeMap.has(e.key)){if(pe in e)return(t=>{if(Ne.has(t.key))return Ne.get(t.key);const e=t.defaultValue();return Ne.set(t.key,e),e})(e);throw(t=>{const e=new Error("Service not found"+(t.key?`: ${String(t.key)}`:""));if(t.stack){const r=t.stack.split("\n");if(r.length>2){const t=r[2].match(/at (.*)/);t&&(e.message=e.message+` (defined at ${t[1]})`)}}if(e.stack){const t=e.stack.split("\n");t.splice(1,3),e.stack=t.join("\n")}return e})(e)}return t.unsafeMap.get(e.key)})),Ie=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=2;const r=new Error;Error.stackTraceLimit=e;const n=Object.create(de);return Object.defineProperty(n,"stack",{get:()=>r.stack}),n.key=t,n},Ce=()=>Se,Me=ke,Ee=Oe,je=Symbol.for("effect/Chunk");const Ae=[],$e=t=>o(((e,r)=>e.length===r.length&&Ge(e).every(((e,n)=>t(e,We(r,n)))))),xe=$e(L),Je={[je]:{_A:t=>t},toString(){return W(this.toJSON())},toJSON(){return{_id:"Chunk",values:Ge(this).map(q)}},[U](){return this.toJSON()},[P](t){return Te(t)&&xe(this,t)},[M](){return F(this,D(Ge(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return Ae[Symbol.iterator]();default:return Ge(this)[Symbol.iterator]()}},pipe(){return Z(this,arguments)}},Re=t=>{const e=Object.create(Je);switch(e.backing=t,t._tag){case"IEmpty":e.length=0,e.depth=0,e.left=e,e.right=e;break;case"IConcat":e.length=t.left.length+t.right.length,e.depth=1+Math.max(t.left.depth,t.right.depth),e.left=t.left,e.right=t.right;break;case"IArray":e.length=t.array.length,e.depth=0,e.left=De,e.right=De;break;case"ISingleton":e.length=1,e.depth=0,e.left=De,e.right=De;break;case"ISlice":e.length=t.length,e.depth=t.chunk.depth+1,e.left=De,e.right=De}return e},Te=t=>d(t,je),De=Re({_tag:"IEmpty"}),Fe=()=>De,Pe=(...t)=>qe(t),Le=t=>Re({_tag:"ISingleton",a:t}),Be=(t,e,r)=>{switch(t.backing._tag){case"IArray":!function(t,e,r,n,i){for(let s=e;s<Math.min(t.length,e+i);s++)r[n+s-e]=t[s]}(t.backing.array,0,e,r,t.length);break;case"IConcat":Be(t.left,e,r),Be(t.right,e,r+t.left.length);break;case"ISingleton":e[r]=t.backing.a;break;case"ISlice":{let n=0,i=r;for(;n<t.length;)e[i]=We(t,n),n+=1,i+=1;break}}},Ge=t=>{switch(t.backing._tag){case"IEmpty":return Ae;case"IArray":return t.backing.array;default:{const e=new Array(t.length);return Be(t,e,0),t.backing={_tag:"IArray",array:e},t.left=De,t.right=De,t.depth=0,e}}},ze=t=>{switch(t.backing._tag){case"IEmpty":case"ISingleton":return t;case"IArray":return Re({_tag:"IArray",array:ee(t.backing.array)});case"IConcat":return Re({_tag:"IConcat",left:ze(t.backing.right),right:ze(t.backing.left)});case"ISlice":return Ue(ee(Ge(t)))}},Ue=t=>0===t.length?Fe():1===t.length?Le(t[0]):Re({_tag:"IArray",array:t}),qe=t=>Ue(t),We=t(2,((t,e)=>{switch(t.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":if(0!==e)throw new Error("Index out of bounds");return t.backing.a;case"IArray":if(e>=t.length||e<0)throw new Error("Index out of bounds");return t.backing.array[e];case"IConcat":return e<t.left.length?We(t.left,e):We(t.right,e-t.left.length);case"ISlice":return We(t.backing.chunk,e+t.backing.offset)}})),He=t(2,((t,e)=>Xe(Le(e),t))),Ve=t(2,((t,e)=>{if(e<=0)return t;if(e>=t.length)return De;switch(t.backing._tag){case"ISlice":return Re({_tag:"ISlice",chunk:t.backing.chunk,offset:t.backing.offset+e,length:t.backing.length-e});case"IConcat":return e>t.left.length?Ve(t.right,e-t.left.length):Re({_tag:"IConcat",left:Ve(t.left,e),right:t.right});default:return Re({_tag:"ISlice",chunk:t,offset:e,length:t.length-e})}})),Xe=t(2,((t,e)=>{if("IEmpty"===t.backing._tag)return e;if("IEmpty"===e.backing._tag)return t;const r=e.depth-t.depth;if(Math.abs(r)<=1)return Re({_tag:"IConcat",left:t,right:e});if(r<-1){if(t.left.depth>=t.right.depth){const r=Xe(t.right,e);return Re({_tag:"IConcat",left:t.left,right:r})}{const r=Xe(t.right.right,e);if(r.depth===t.depth-3){const e=Re({_tag:"IConcat",left:t.right.left,right:r});return Re({_tag:"IConcat",left:t.left,right:e})}{const e=Re({_tag:"IConcat",left:t.left,right:t.right.left});return Re({_tag:"IConcat",left:e,right:r})}}}if(e.right.depth>=e.left.depth){const r=Xe(t,e.left);return Re({_tag:"IConcat",left:r,right:e.right})}{const r=Xe(t,e.left.left);if(r.depth===e.depth-3){const t=Re({_tag:"IConcat",left:r,right:e.left.right});return Re({_tag:"IConcat",left:t,right:e.right})}{const t=Re({_tag:"IConcat",left:e.left.right,right:e.right});return Re({_tag:"IConcat",left:r,right:t})}}})),Ye=t=>t.length>0,Ze=t=>We(t,0),Ke=Ze,Qe=t=>Ve(t,1),tr=Symbol.for("effect/Duration"),er=BigInt(0),rr=BigInt(24),nr=BigInt(60),ir=BigInt(1e3),sr=BigInt(1e6),ar=BigInt(1e9),or=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,cr=t=>{if(gr(t))return t;if(g(t))return br(t);if((t=>"bigint"==typeof t)(t))return dr(t);if(Array.isArray(t)&&2===t.length&&t.every(g))return t[0]===-1/0||t[1]===-1/0||Number.isNaN(t[0])||Number.isNaN(t[1])?pr:t[0]===1/0||t[1]===1/0?_r:dr(BigInt(Math.round(1e9*t[0]))+BigInt(Math.round(t[1])));if((t=>"string"==typeof t)(t)){const e=or.exec(t);if(e){const[t,r,n]=e,i=Number(r);switch(n){case"nano":case"nanos":return dr(BigInt(r));case"micro":case"micros":return mr(BigInt(r));case"milli":case"millis":return br(i);case"second":case"seconds":return yr(i);case"minute":case"minutes":return vr(i);case"hour":case"hours":return Sr(i);case"day":case"days":return wr(i);case"week":case"weeks":return kr(i)}}}throw new Error("Invalid DurationInput")},ur={_tag:"Millis",millis:0},lr={_tag:"Infinity"},fr={[tr]:tr,[M](){return F(this,T(this.value))},[P](t){return gr(t)&&Mr(this,t)},toString(){return`Duration(${jr(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:Or(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[U](){return this.toJSON()},pipe(){return Z(this,arguments)}},hr=t=>{const e=Object.create(fr);return g(t)?isNaN(t)||t<=0?e.value=ur:Number.isFinite(t)?Number.isInteger(t)?e.value={_tag:"Millis",millis:t}:e.value={_tag:"Nanos",nanos:BigInt(Math.round(1e6*t))}:e.value=lr:e.value=t<=er?ur:{_tag:"Nanos",nanos:t},e},gr=t=>d(t,tr),pr=hr(0),_r=hr(1/0),dr=t=>hr(t),mr=t=>hr(t*ir),br=t=>hr(t),yr=t=>hr(1e3*t),vr=t=>hr(6e4*t),Sr=t=>hr(36e5*t),wr=t=>hr(864e5*t),kr=t=>hr(6048e5*t),Nr=t=>Ir(t,{onMillis:t=>t,onNanos:t=>Number(t)/1e6}),Or=t=>{const e=cr(t);switch(e.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(e.value.nanos/ar),Number(e.value.nanos%ar)];case"Millis":return[Math.floor(e.value.millis/1e3),Math.round(e.value.millis%1e3*1e6)]}},Ir=t(2,((t,e)=>{const r=cr(t);switch(r.value._tag){case"Nanos":return e.onNanos(r.value.nanos);case"Infinity":return e.onMillis(1/0);case"Millis":return e.onMillis(r.value.millis)}})),Cr=t(3,((t,e,r)=>{const n=cr(t),i=cr(e);if("Infinity"===n.value._tag||"Infinity"===i.value._tag)return r.onMillis(Nr(n),Nr(i));if("Nanos"===n.value._tag||"Nanos"===i.value._tag){const t="Nanos"===n.value._tag?n.value.nanos:BigInt(Math.round(1e6*n.value.millis)),e="Nanos"===i.value._tag?i.value.nanos:BigInt(Math.round(1e6*i.value.millis));return r.onNanos(t,e)}return r.onMillis(n.value.millis,i.value.millis)})),Mr=t(2,((t,e)=>((t,e)=>Cr(t,e,{onMillis:(t,e)=>t===e,onNanos:(t,e)=>t===e}))(cr(t),cr(e)))),Er=t=>{const e=cr(t);if("Infinity"===e.value._tag)return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};const r=(t=>{const e=cr(t);switch(e.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return e.value.nanos;case"Millis":return BigInt(Math.round(1e6*e.value.millis))}})(e),n=r/sr,i=n/ir,s=i/nr,a=s/nr;return{days:Number(a/rr),hours:Number(a%rr),minutes:Number(s%nr),seconds:Number(i%nr),millis:Number(n%ir),nanos:Number(r%sr)}},jr=t=>{const e=cr(t);if("Infinity"===e.value._tag)return"Infinity";if((t=>{switch(t.value._tag){case"Millis":return 0===t.value.millis;case"Nanos":return t.value.nanos===er;case"Infinity":return!1}})(e))return"0";const r=Er(e),n=[];return 0!==r.days&&n.push(`${r.days}d`),0!==r.hours&&n.push(`${r.hours}h`),0!==r.minutes&&n.push(`${r.minutes}m`),0!==r.seconds&&n.push(`${r.seconds}s`),0!==r.millis&&n.push(`${r.millis}ms`),0!==r.nanos&&n.push(`${r.nanos}ns`),n.join(" ")},Ar=Math.pow(2,5),$r=Ar-1,xr=Ar/2,Jr=Ar/4;function Rr(t,e){return e>>>t&$r}function Tr(t){return 1<<t}function Dr(t,e){return r=t&e-1,r=(r=(858993459&(r-=r>>1&1431655765))+(r>>2&858993459))+(r>>4)&252645135,127&(r+=r>>8)+(r>>16);var r}const Fr=(t,e)=>({value:t,previous:e});function Pr(t,e,r,n){let i=n;if(!t){const t=n.length;i=new Array(t);for(let e=0;e<t;++e)i[e]=n[e]}return i[e]=r,i}function Lr(t,e,r){const n=r.length-1;let i=0,s=0,a=r;if(t)i=s=e;else for(a=new Array(n);i<e;)a[s++]=r[i++];for(++i;i<=n;)a[s++]=r[i++];return t&&(a.length=n),a}class Br{_tag="EmptyNode";modify(t,e,r,n,i,s){const a=r(xt());return Rt(a)?new Br:(++s.value,new Ur(t,n,i,a))}}function Gr(t){return m(t,"EmptyNode")}function zr(t,e){return!Gr(t)&&e===t.edit}class Ur{edit;hash;key;value;_tag="LeafNode";constructor(t,e,r,n){this.edit=t,this.hash=e,this.key=r,this.value=n}modify(t,e,r,n,i,s){if(L(i,this.key)){const e=r(this.value);return e===this.value?this:Rt(e)?(--s.value,new Br):zr(this,t)?(this.value=e,this):new Ur(t,n,i,e)}const a=r(xt());return Rt(a)?this:(++s.value,Xr(t,e,this.hash,this,n,new Ur(t,n,i,a)))}}class qr{edit;hash;children;_tag="CollisionNode";constructor(t,e,r){this.edit=t,this.hash=e,this.children=r}modify(t,e,r,n,i,s){if(n===this.hash){const e=zr(this,t),n=this.updateCollisionList(e,t,this.hash,this.children,r,i,s);return n===this.children?this:n.length>1?new qr(t,this.hash,n):n[0]}const a=r(xt());return Rt(a)?this:(++s.value,Xr(t,e,this.hash,this,n,new Ur(t,n,i,a)))}updateCollisionList(t,e,r,n,i,s,a){const o=n.length;for(let c=0;c<o;++c){const o=n[c];if("key"in o&&L(s,o.key)){const u=o.value,l=i(u);return l===u?n:Rt(l)?(--a.value,Lr(t,c,n)):Pr(t,c,new Ur(e,r,s,l),n)}}const c=i(xt());return Rt(c)?n:(++a.value,Pr(t,o,new Ur(e,r,s,c),n))}}class Wr{edit;mask;children;_tag="IndexedNode";constructor(t,e,r){this.edit=t,this.mask=e,this.children=r}modify(t,e,r,n,i,s){const a=this.mask,o=this.children,c=Rr(e,n),u=Tr(c),l=Dr(a,u),f=a&u,h=zr(this,t);if(!f){const f=(new Br).modify(t,e+5,r,n,i,s);return f?o.length>=xr?function(t,e,r,n,i){const s=[];let a=n,o=0;for(let t=0;a;++t)1&a&&(s[t]=i[o++]),a>>>=1;return s[e]=r,new Hr(t,o+1,s)}(t,c,f,a,o):new Wr(t,a|u,function(t,e,r,n){const i=n.length;if(t){let t=i;for(;t>=e;)n[t--]=n[t];return n[e]=r,n}let s=0,a=0;const o=new Array(i+1);for(;s<e;)o[a++]=n[s++];for(o[e]=r;s<i;)o[++a]=n[s++];return o}(h,l,f,o)):this}const g=o[l],p=g.modify(t,e+5,r,n,i,s);if(g===p)return this;let _,d=a;if(Gr(p)){if(d&=~u,!d)return new Br;if(o.length<=2&&(Gr(m=o[1^l])||"LeafNode"===m._tag||"CollisionNode"===m._tag))return o[1^l];_=Lr(h,l,o)}else _=Pr(h,l,p,o);var m;return h?(this.mask=d,this.children=_,this):new Wr(t,d,_)}}class Hr{edit;size;children;_tag="ArrayNode";constructor(t,e,r){this.edit=t,this.size=e,this.children=r}modify(t,e,r,n,i,s){let a=this.size;const o=this.children,c=Rr(e,n),u=o[c],l=(u||new Br).modify(t,e+5,r,n,i,s);if(u===l)return this;const f=zr(this,t);let h;if(Gr(u)&&!Gr(l))++a,h=Pr(f,c,l,o);else if(!Gr(u)&&Gr(l)){if(--a,a<=Jr)return function(t,e,r,n){const i=new Array(e-1);let s=0,a=0;for(let t=0,e=n.length;t<e;++t)if(t!==r){const e=n[t];e&&!Gr(e)&&(i[s++]=e,a|=1<<t)}return new Wr(t,a,i)}(t,a,c,o);h=Pr(f,c,new Br,o)}else h=Pr(f,c,l,o);return f?(this.size=a,this.children=h,this):new Hr(t,a,h)}}function Vr(t,e,r,n,i,s){if(r===i)return new qr(t,r,[s,n]);const a=Rr(e,r),o=Rr(e,i);if(a===o)return e=>new Wr(t,Tr(a)|Tr(o),[e]);{const e=a<o?[n,s]:[s,n];return new Wr(t,Tr(a)|Tr(o),e)}}function Xr(t,e,r,n,i,s){let a,o=e;for(;;){const e=Vr(t,o,r,n,i,s);if("function"!=typeof e){let t=e;for(;null!=a;)t=a.value(t),a=a.previous;return t}a=Fr(e,a),o+=5}}const Yr="effect/HashMap",Zr=Symbol.for(Yr),Kr={[Zr]:Zr,[Symbol.iterator](){return new tn(this,((t,e)=>[t,e]))},[M](){let t=E(Yr);for(const e of this)t^=a(E(e[0]),A(E(e[1])));return F(this,t)},[P](t){if(on(t)){if(t._size!==this._size)return!1;for(const e of this){const r=a(t,cn(e[0],E(e[0])));if(Rt(r))return!1;if(!L(e[1],r.value))return!1}return!0}return!1},toString(){return W(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(q)}},[U](){return this.toJSON()},pipe(){return Z(this,arguments)}},Qr=(t,e,r,n)=>{const i=Object.create(Kr);return i._editable=t,i._edit=e,i._root=r,i._size=n,i};class tn{map;f;v;constructor(t,e){this.map=t,this.f=e,this.v=rn(this.map._root,this.f,void 0)}next(){if(Rt(this.v))return{done:!0,value:void 0};const t=this.v.value;return this.v=en(t.cont),{done:!1,value:t.value}}[Symbol.iterator](){return new tn(this.map,this.f)}}const en=t=>t?nn(t[0],t[1],t[2],t[3],t[4]):xt(),rn=(t,e,r=void 0)=>{switch(t._tag){case"LeafNode":return Tt(t.value)?Jt({value:e(t.key,t.value.value),cont:r}):en(r);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const n=t.children;return nn(n.length,n,0,e,r)}default:return en(r)}},nn=(t,e,r,n,i)=>{for(;r<t;){const s=e[r++];if(s&&!Gr(s))return rn(s,n,[t,e,r,n,i])}return en(i)},sn=Qr(!1,0,new Br,0),an=()=>sn,on=t=>d(t,Zr),cn=t(3,((t,e,r)=>{let n=t._root,i=0;for(;;)switch(n._tag){case"LeafNode":return L(e,n.key)?n.value:xt();case"CollisionNode":if(r===n.hash){const t=n.children;for(let r=0,n=t.length;r<n;++r){const n=t[r];if("key"in n&&L(e,n.key))return n.value}}return xt();case"IndexedNode":{const t=Tr(Rr(i,r));if(n.mask&t){n=n.children[Dr(n.mask,t)],i+=5;break}return xt()}case"ArrayNode":if(n=n.children[Rr(i,r)],n){i+=5;break}return xt();default:return xt()}})),un=t(3,((t,e,r)=>pn(t,e,(()=>Jt(r))))),ln=t(3,((t,e,r)=>t._editable?(t._root=e,t._size=r,t):e===t._root?t:Qr(t._editable,t._edit,e,r))),fn=t=>t._size,hn=t=>Qr(!0,t._edit+1,t._root,t._size),gn=t=>(t._editable=!1,t),pn=t(3,((t,e,r)=>_n(t,e,E(e),r))),_n=t(4,((t,e,r,n)=>{const i={value:t._size},s=t._root.modify(t._editable?t._edit:NaN,0,n,r,e,i);return a(t,ln(s,i.value))})),dn=t(2,((t,e)=>mn(t,void 0,((t,r,n)=>e(r,n))))),mn=t(3,((t,e,r)=>{const n=t._root;if("LeafNode"===n._tag)return Tt(n.value)?r(e,n.value.value,n.key):e;if("EmptyNode"===n._tag)return e;const i=[n.children];let s;for(;s=i.pop();)for(let t=0,n=s.length;t<n;){const n=s[t++];n&&!Gr(n)&&("LeafNode"===n._tag?Tt(n.value)&&(e=r(e,n.value.value,n.key)):i.push(n.children))}return e})),bn="effect/HashSet",yn=Symbol.for(bn),vn={[yn]:yn,[Symbol.iterator](){return t=this._keyMap,new tn(t,(t=>t));var t},[M](){return F(this,A(E(this._keyMap))(E(bn)))},[P](t){return!!wn(t)&&(fn(this._keyMap)===fn(t._keyMap)&&L(this._keyMap,t._keyMap))},toString(){return W(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(q)}},[U](){return this.toJSON()},pipe(){return Z(this,arguments)}},Sn=t=>{const e=Object.create(vn);return e._keyMap=t,e},wn=t=>d(t,yn),kn=Sn(an()),Nn=()=>kn,On=t=>Sn(hn(t._keyMap)),In=t=>(t._keyMap._editable=!1,t),Cn=t(2,((t,e)=>{const r=On(t);return e(r),In(r)})),Mn=t(2,((t,e)=>t._keyMap._editable?(un(e,!0)(t._keyMap),t):Sn(un(e,!0)(t._keyMap)))),En=t(2,((t,e)=>Cn(Nn(),(r=>{jn(t,(t=>Mn(r,t)));for(const t of e)Mn(r,t)})))),jn=t(2,((t,e)=>dn(t._keyMap,((t,r)=>e(r))))),An=Nn,$n=t=>{const e=On(Nn());for(const r of t)Mn(e,r);return In(e)},xn=t=>fn(t._keyMap),Jn=Mn,Rn=En,Tn="effect/FiberId",Dn=Symbol.for(Tn),Fn="None",Pn=R(`${Tn}-${Fn}`);class Ln{[Dn]=Dn;_tag=Fn;id=-1;startTimeMillis=-1;[M](){return Pn}[P](t){return Bn(t)&&t._tag===Fn}toString(){return W(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[U](){return this.toJSON()}}const Bn=t=>d(t,Dn),Gn=new Ln,zn=an,Un=t=>{const e=hn(an());for(const r of t)un(e,r[0],r[1]);return gn(e)},qn=Symbol.for("effect/List"),Wn=t=>zt(t),Hn=(t=>c(le(t),Wn))(L),Vn={[qn]:qn,_tag:"Cons",toString(){return W(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:Wn(this).map(q)}},[U](){return this.toJSON()},[P](t){return Qn(t)&&this._tag===t._tag&&Hn(this,t)},[M](){return F(this,D(Wn(this)))},[Symbol.iterator](){let t=!1,e=this;return{next(){if(t)return this.return();if("Nil"===e._tag)return t=!0,this.return();const r=e.head;return e=e.tail,{done:t,value:r}},return:e=>(t||(t=!0),{done:!0,value:e})}},pipe(){return Z(this,arguments)}},Xn=(t,e)=>{const r=Object.create(Vn);return r.head=t,r.tail=e,r},Yn=R("Nil"),Zn={[qn]:qn,_tag:"Nil",toString(){return W(this.toJSON())},toJSON:()=>({_id:"List",_tag:"Nil"}),[U](){return this.toJSON()},[M]:()=>Yn,[P](t){return Qn(t)&&this._tag===t._tag},[Symbol.iterator]:()=>({next:()=>({done:!0,value:void 0})}),pipe(){return Z(this,arguments)}},Kn=Object.create(Zn),Qn=t=>d(t,qn),ti=(t,e)=>Xn(t,e),ei=function(){function t(t){t&&Object.assign(this,t)}return t.prototype=ct,t}();ei.prototype;const ri=Symbol.for("effect/DifferContextPatch");function ni(t){return t}const ii={...ei.prototype,[ri]:{_Value:ni,_Patch:ni}},si=Object.assign(Object.create(ii),{_tag:"Empty"}),ai=Object.create(si),oi=()=>ai,ci=Object.assign(Object.create(ii),{_tag:"AndThen"}),ui=Object.assign(Object.create(ii),{_tag:"AddService"}),li=(t,e)=>{const r=Object.create(ui);return r.key=t,r.service=e,r},fi=Object.assign(Object.create(ii),{_tag:"RemoveService"}),hi=t=>{const e=Object.create(fi);return e.key=t,e},gi=Object.assign(Object.create(ii),{_tag:"UpdateService"}),pi=(t,e)=>{const r=Object.create(gi);return r.key=t,r.update=e,r},_i=t(2,((t,e)=>((t,e)=>{const r=Object.create(ci);return r.first=t,r.second=e,r})(t,e))),di=t(2,((t,e)=>{if("Empty"===t._tag)return e;let r=!1,n=Le(t);const i=new Map(e.unsafeMap);for(;Ye(n);){const t=Ke(n),e=Qe(n);switch(t._tag){case"Empty":n=e;break;case"AddService":i.set(t.key,t.service),n=e;break;case"AndThen":n=He(He(e,t.second),t.first);break;case"RemoveService":i.delete(t.key),n=e;break;case"UpdateService":i.set(t.key,t.update(i.get(t.key))),r=!0,n=e}}if(!r)return ye(i);const s=new Map;for(const[t]of e.unsafeMap)i.has(t)&&(s.set(t,i.get(t)),i.delete(t));for(const[t,e]of i)s.set(t,e);return ye(s)}));ei.prototype,ei.prototype,ei.prototype,ei.prototype;const mi=Symbol.for("effect/Differ"),bi={[mi]:{_P:e,_V:e},pipe(){return Z(this,arguments)}},yi=()=>(t=>{const e=Object.create(bi);return e.empty=t.empty,e.diff=t.diff,e.combine=t.combine,e.patch=t.patch,e})({empty:oi(),combine:(t,e)=>_i(e)(t),diff:(t,e)=>((t,e)=>{const r=new Map(t.unsafeMap);let n=oi();for(const[t,i]of e.unsafeMap.entries())if(r.has(t)){const e=r.get(t);r.delete(t),L(e,i)||(n=_i(pi(t,(()=>i)))(n))}else r.delete(t),n=_i(li(t,i))(n);for(const[t]of r.entries())n=_i(hi(t))(n);return n})(t,e),patch:(t,e)=>di(e)(t)}),vi=(t,e)=>(255&t)+((e&t&255)<<8),Si=t(2,((t,e)=>!!(t&e))),wi=t=>vi(t,t),ki=t=>vi(t,0),Ni="Die",Oi="Empty",Ii="Fail",Ci="Interrupt",Mi="Parallel",Ei="Sequential",ji="effect/Cause",Ai=Symbol.for(ji),$i={[Ai]:{_E:t=>t},[M](){return a(E(ji),A(E(zi(this))),F(this))},[P](t){return Pi(t)&&Gi(this,t)},pipe(){return Z(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:q(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:q(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:q(this.left),right:q(this.right)}}},toString(){return Qi(this)},[U](){return this.toJSON()}},xi=(()=>{const t=Object.create($i);return t._tag=Oi,t})(),Ji=t=>{const e=Object.create($i);return e._tag=Ii,e.error=t,e},Ri=t=>{const e=Object.create($i);return e._tag=Ni,e.defect=t,e},Ti=t=>{const e=Object.create($i);return e._tag=Ci,e.fiberId=t,e},Di=(t,e)=>{const r=Object.create($i);return r._tag=Mi,r.left=t,r.right=e,r},Fi=(t,e)=>{const r=Object.create($i);return r._tag=Ei,r.left=t,r.right=e,r},Pi=t=>d(t,Ai),Li=t=>Ki(void 0,Hi)(t),Bi=t=>{const e=(t=>qi(t,(t=>t._tag===Ii?Jt(t.error):xt())))(t);switch(e._tag){case"None":return It(t);case"Some":return Ct(e.value)}},Gi=(t,e)=>{let r=Le(t),n=Le(e);for(;Ye(r)&&Ye(n);){const[t,e]=a(Ke(r),Zi([An(),Fe()],(([t,e],r)=>{const[n,i]=Wi(r);return Jt([a(t,Rn(n)),a(e,Xe(i))])}))),[i,s]=a(Ke(n),Zi([An(),Fe()],(([t,e],r)=>{const[n,i]=Wi(r);return Jt([a(t,Rn(n)),a(e,Xe(i))])})));if(!L(t,i))return!1;r=e,n=s}return!0},zi=t=>Ui(Le(t),Fe()),Ui=(t,e)=>{for(;;){const[r,n]=a(t,ce([An(),Fe()],(([t,e],r)=>{const[n,i]=Wi(r);return[a(t,Rn(n)),a(e,Xe(i))]}))),i=xn(r)>0?a(e,He(r)):e;if(0===n.length)return ze(i);t=n,e=i}throw new Error(y("Cause.flattenCauseLoop"))},qi=t(2,((t,e)=>{const r=[t];for(;r.length>0;){const t=r.pop(),n=e(t);switch(n._tag){case"None":switch(t._tag){case Ei:case Mi:r.push(t.right),r.push(t.left)}break;case"Some":return n}}return xt()})),Wi=t=>{let e=t;const r=[];let n=An(),i=Fe();for(;void 0!==e;)switch(e._tag){case Oi:if(0===r.length)return[n,i];e=r.pop();break;case Ii:if(n=Jn(n,Pe(e._tag,e.error)),0===r.length)return[n,i];e=r.pop();break;case Ni:if(n=Jn(n,Pe(e._tag,e.defect)),0===r.length)return[n,i];e=r.pop();break;case Ci:if(n=Jn(n,Pe(e._tag,e.fiberId)),0===r.length)return[n,i];e=r.pop();break;case Ei:switch(e.left._tag){case Oi:e=e.right;break;case Ei:e=Fi(e.left.left,Fi(e.left.right,e.right));break;case Mi:e=Di(Fi(e.left.left,e.right),Fi(e.left.right,e.right));break;default:i=He(i,e.right),e=e.left}break;case Mi:r.push(e.right),e=e.left}throw new Error(y("Cause.evaluateCauseLoop"))},Hi={emptyCase:n,failCase:i,dieCase:i,interruptCase:n,sequentialCase:(t,e,r)=>e&&r,parallelCase:(t,e,r)=>e&&r},Vi="SequentialCase",Xi="ParallelCase",Yi=t(2,((t,{onDie:e,onEmpty:r,onFail:n,onInterrupt:i,onParallel:s,onSequential:a})=>Ki(t,void 0,{emptyCase:()=>r,failCase:(t,e)=>n(e),dieCase:(t,r)=>e(r),interruptCase:(t,e)=>i(e),sequentialCase:(t,e,r)=>a(e,r),parallelCase:(t,e,r)=>s(e,r)}))),Zi=t(3,((t,e,r)=>{let n=e,i=t;const s=[];for(;void 0!==i;){const t=r(n,i);switch(n=Tt(t)?t.value:n,i._tag){case Ei:case Mi:s.push(i.right),i=i.left;break;default:i=void 0}void 0===i&&s.length>0&&(i=s.pop())}return n})),Ki=t(3,((t,e,r)=>{const n=[t],i=[];for(;n.length>0;){const t=n.pop();switch(t._tag){case Oi:i.push(It(r.emptyCase(e)));break;case Ii:i.push(It(r.failCase(e,t.error)));break;case Ni:i.push(It(r.dieCase(e,t.defect)));break;case Ci:i.push(It(r.interruptCase(e,t.fiberId)));break;case Ei:n.push(t.right),n.push(t.left),i.push(Ct({_tag:Vi}));break;case Mi:n.push(t.right),n.push(t.left),i.push(Ct({_tag:Xi}))}}const s=[];for(;i.length>0;){const t=i.pop();switch(t._tag){case"Left":switch(t.left._tag){case Vi:{const t=s.pop(),n=s.pop(),i=r.sequentialCase(e,t,n);s.push(i);break}case Xi:{const t=s.pop(),n=s.pop(),i=r.parallelCase(e,t,n);s.push(i);break}}break;case"Right":s.push(t.right)}}if(0===s.length)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return s.pop()})),Qi=(t,e)=>Li(t)?"All fibers interrupted without errors.":os(t).map((function(t){return!0!==e?.renderErrorCause||void 0===t.cause?t.stack:`${t.stack} {\n${ts(t.cause,"  ")}\n}`})).join("\n"),ts=(t,e)=>{const r=t.stack.split("\n");let n=`${e}[cause]: ${r[0]}`;for(let t=1,i=r.length;t<i;t++)n+=`\n${e}${r[t]}`;return t.cause&&(n+=` {\n${ts(t.cause,`${e}  `)}\n${e}}`),n};class es extends globalThis.Error{span=void 0;constructor(t){const e="object"==typeof t&&null!==t,r=Error.stackTraceLimit;Error.stackTraceLimit=1,super(rs(t),e&&"cause"in t&&void 0!==t.cause?{cause:new es(t.cause)}:void 0),""===this.message&&(this.message="An error has occurred"),Error.stackTraceLimit=r,this.name=t instanceof Error?t.name:"Error",e&&(as in t&&(this.span=t[as]),Object.keys(t).forEach((e=>{e in this||(this[e]=t[e])}))),this.stack=ss(`${this.name}: ${this.message}`,t instanceof Error&&t.stack?t.stack:"",this.span)}}const rs=t=>{if("string"==typeof t)return t;if("object"==typeof t&&null!==t&&t instanceof Error)return t.message;try{if(d(t,"toString")&&p(t.toString)&&t.toString!==Object.prototype.toString&&t.toString!==globalThis.Array.prototype.toString)return t.toString()}catch{}return((t,e)=>{let r=[];const n=JSON.stringify(t,((t,e)=>"object"==typeof e&&null!==e?r.includes(e)?void 0:r.push(e)&&(void 0!==X.fiberRefs&&V(e)?e[H](X.fiberRefs):e):e),e);return r=void 0,n})(t)},ns=/\((.*)\)/g,is=h("effect/Tracer/spanToTrace",(()=>new WeakMap)),ss=(t,e,r)=>{const n=[t],i=e.startsWith(t)?e.slice(t.length).split("\n"):e.split("\n");for(let t=1;t<i.length&&!i[t].includes("Generator.next");t++){if(i[t].includes("effect_internal_function")){n.pop();break}n.push(i[t].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(r){let t=r,e=0;for(;t&&"Span"===t._tag&&e<10;){const r=is.get(t);if("function"==typeof r){const e=r();if("string"==typeof e){const r=e.matchAll(ns);let i=!1;for(const[,e]of r)i=!0,n.push(`    at ${t.name} (${e})`);i||n.push(`    at ${t.name} (${e.replace(/^at /,"")})`)}else n.push(`    at ${t.name}`)}else n.push(`    at ${t.name}`);t=Pt(t.parent),e++}}return n.join("\n")},as=Symbol.for("effect/SpanAnnotation"),os=t=>Ki(t,void 0,{emptyCase:()=>[],dieCase:(t,e)=>[new es(e)],failCase:(t,e)=>[new es(e)],interruptCase:()=>[],parallelCase:(t,e,r)=>[...e,...r],sequentialCase:(t,e,r)=>[...e,...r]});class cs{self;called=!1;constructor(t){this.self=t}next(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(t){return{value:t,done:!0}}throw(t){throw t}[Symbol.iterator](){return new cs(this.self)}}const us=Symbol.for("effect/Effect");class ls{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[us]=at;constructor(t){this._op=t}[P](t){return this===t}[M](){return F(this,j(this))}pipe(){return Z(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:q(this.effect_instruction_i0),effect_instruction_i1:q(this.effect_instruction_i1),effect_instruction_i2:q(this.effect_instruction_i2)}}toString(){return W(this.toJSON())}[U](){return this.toJSON()}[Symbol.iterator](){return new cs(new N(this))}}class fs{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[us]=at;constructor(t){this._op=t,this._tag=t}[P](t){return Xs(t)&&"Failure"===t._op&&L(this.effect_instruction_i0,t.effect_instruction_i0)}[M](){return a(R(this._tag),A(E(this.effect_instruction_i0)),F(this))}get cause(){return this.effect_instruction_i0}pipe(){return Z(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return W(this.toJSON())}[U](){return this.toJSON()}[Symbol.iterator](){return new cs(new N(this))}}class hs{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[us]=at;constructor(t){this._op=t,this._tag=t}[P](t){return Xs(t)&&"Success"===t._op&&L(this.effect_instruction_i0,t.effect_instruction_i0)}[M](){return a(R(this._tag),A(E(this.effect_instruction_i0)),F(this))}get value(){return this.effect_instruction_i0}pipe(){return Z(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:q(this.value)}}toString(){return W(this.toJSON())}[U](){return this.toJSON()}[Symbol.iterator](){return new cs(new N(this))}}const gs=t=>{const e=new ls("WithRuntime");return e.effect_instruction_i0=t,e},ps=t(2,((t,e)=>Ns(t,(()=>Rs(e))))),_s=t=>ps(t,void 0),ds=function(){const t=new ls(K);switch(arguments.length){case 2:t.effect_instruction_i0=arguments[0],t.commit=arguments[1];break;case 3:t.effect_instruction_i0=arguments[0],t.effect_instruction_i1=arguments[1],t.commit=arguments[2];break;case 4:t.effect_instruction_i0=arguments[0],t.effect_instruction_i1=arguments[1],t.effect_instruction_i2=arguments[2],t.commit=arguments[3];break;default:throw new Error(y("you're not supposed to end up here"))}return t},ms=(t,e=Gn)=>ds(t,(function(){let t,r;function n(e){t?t(e):void 0===r&&(r=e)}const i=new ls("Async");let s,a;return i.effect_instruction_i0=e=>{t=e,r&&e(r)},i.effect_instruction_i1=e,1!==this.effect_instruction_i0.length?(a=new AbortController,s=I((()=>this.effect_instruction_i0(n,a.signal)))):s=I((()=>this.effect_instruction_i0(n))),s||a?Js(i,(t=>(a&&a.abort(),s??Ls))):i})),bs=t(2,((t,e)=>Is(t,{onFailure:e,onSuccess:Rs}))),ys=Symbol.for("effect/OriginalAnnotation"),vs=t=>Is(t,{onFailure:t=>Rs(Ct(t)),onSuccess:t=>Rs(It(t))}),Ss=t=>_(t)&&!(as in t)?gs((e=>{return ks(Ji((r=t,n=Qs(e),Tt(n)?new Proxy(r,{has:(t,e)=>e===as||e===ys||e in t,get:(t,e)=>e===as?n.value:e===ys?r:t[e]}):r)));var r,n})):ks(Ji(t)),ws=t=>Ns(Ds(t),Ss),ks=t=>{const e=new fs(Q);return e.effect_instruction_i0=t,e},Ns=t(2,((t,e)=>{const r=new ls("OnSuccess");return r.effect_instruction_i0=t,r.effect_instruction_i1=e,r})),Os=t(2,((t,e)=>{const r=new ls("OnSuccessAndFailure");return r.effect_instruction_i0=t,r.effect_instruction_i1=e.onFailure,r.effect_instruction_i2=e.onSuccess,r})),Is=t(2,((t,e)=>Os(t,{onFailure:t=>{const r=(t=>ze(Zi(t,Fe(),((t,e)=>e._tag===Ni?Jt(a(t,He(e.defect))):xt()))))(t);if(r.length>0)return ks((t=>Yi(t,{onEmpty:xi,onFail:Ri,onDie:Ri,onInterrupt:Ti,onSequential:Fi,onParallel:Di}))(t));const n=(t=>ze(Zi(t,Fe(),((t,e)=>e._tag===Ii?Jt(a(t,He(e.error))):xt()))))(t);return n.length>0?e.onFailure(Ze(n)):ks(t)},onSuccess:e.onSuccess}))),Cs=t(2,((t,e)=>Ts((()=>{const r=zt(t),n=(i=r.length,new Array(i));var i;let s=0;return ps(Bs({while:()=>s<r.length,body:()=>e(r[s],s),step:t=>{n[s++]=t}}),n)})))),Ms=t(2,((t,e)=>Ts((()=>{const r=zt(t);let n=0;return Bs({while:()=>n<r.length,body:()=>e(r[n],n),step:()=>{n++}})})))),Es=t=>{const e=new ls(et);return e.effect_instruction_i0=wi(1),e.effect_instruction_i1=()=>t,e},js=t(2,((t,e)=>Ns(t,(t=>Ds((()=>e(t))))))),As=t(2,((t,e)=>Is(t,{onFailure:t=>ws((()=>e.onFailure(t))),onSuccess:t=>Ds((()=>e.onSuccess(t)))}))),$s=t(2,((t,e)=>Os(t,{onFailure:t=>{const r=Bi(t);switch(r._tag){case"Left":return ws((()=>e(r.left)));case"Right":return ks(r.right)}},onSuccess:Rs}))),xs=t(2,((t,e)=>Ps((r=>Os(r(t),{onFailure:t=>{const r=Ys(t);return Os(e(r),{onFailure:e=>Ys(Fi(t,e)),onSuccess:()=>r})},onSuccess:t=>{const r=Ks(t);return zs(e(r),r)}}))))),Js=t(2,((t,e)=>xs(t,Zs({onFailure:t=>Li(t)?_s(e((t=>Zi(t,An(),((t,e)=>e._tag===Ci?Jt(a(t,Jn(e.fiberId))):xt())))(t))):Ls,onSuccess:()=>Ls})))),Rs=t=>{const e=new hs(tt);return e.effect_instruction_i0=t,e},Ts=t=>{const e=new ls(K);return e.commit=t,e},Ds=t=>{const e=new ls("Sync");return e.effect_instruction_i0=t,e},Fs=t=>{const e=new ls(et);return e.effect_instruction_i0=ki(1),e.effect_instruction_i1=()=>t,e},Ps=t=>ds(t,(function(){const t=new ls(et);return t.effect_instruction_i0=ki(1),t.effect_instruction_i1=t=>Si(t,1)?I((()=>this.effect_instruction_i0(Es))):I((()=>this.effect_instruction_i0(Fs))),t})),Ls=Rs(void 0),Bs=t=>{const e=new ls("While");return e.effect_instruction_i0=t.while,e.effect_instruction_i1=t.body,e.effect_instruction_i2=t.step,e},Gs=t(2,((t,e)=>Ns(t,(t=>js(e,(e=>[t,e])))))),zs=t(2,((t,e)=>Ns(t,(()=>e)))),Us=Symbol.for("effect/FiberRef"),qs={_A:t=>t},Ws=t=>gs((e=>Ks(e.getFiberRef(t)))),Hs=t(2,((t,e)=>Ns(Ws(t),e))),Vs=(t,e)=>{const r={...ut,[Us]:qs,initial:t,commit(){return Ws(this)},diff:(t,r)=>e.differ.diff(t,r),combine:(t,r)=>e.differ.combine(t,r),patch:t=>r=>e.differ.patch(t,r),fork:e.fork,join:e.join??((t,e)=>e)};return r},Xs=t=>(t=>d(t,us))(t)&&"_tag"in t&&("Success"===t._tag||"Failure"===t._tag),Ys=t=>{const e=new fs(Q);return e.effect_instruction_i0=t,e},Zs=t(2,((t,{onFailure:e,onSuccess:r})=>{switch(t._tag){case Q:return e(t.effect_instruction_i0);case tt:return r(t.effect_instruction_i0)}})),Ks=t=>{const e=new hs(tt);return e.effect_instruction_i0=t,e},Qs=t=>{const e=t.currentSpan;return void 0!==e&&"Span"===e._tag?Jt(e):xt()},ta=Symbol.for("effect/Clock"),ea=Ie("effect/Clock"),ra={unsafeSchedule(t,e){const r=Nr(e);if(r>2147483647)return i;let n=!1;const s=setTimeout((()=>{n=!0,t()}),r);return()=>(clearTimeout(s),!n)}},na=function(){const t=BigInt(1e6);if("undefined"==typeof performance)return()=>BigInt(Date.now())*t;if("number"==typeof performance.timeOrigin&&0===performance.timeOrigin)return()=>BigInt(Math.round(1e6*performance.now()));const e=BigInt(Date.now())*t-BigInt(Math.round(1e6*performance.now()));return()=>e+BigInt(Math.round(1e6*performance.now()))}(),ia=function(){const t="object"==typeof process&&"hrtime"in process&&"function"==typeof process.hrtime.bigint?process.hrtime:void 0;if(!t)return na;const e=na()-t.bigint();return()=>e+t.bigint()}();class sa{[ta]=ta;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return ia()}currentTimeMillis=Ds((()=>this.unsafeCurrentTimeMillis()));currentTimeNanos=Ds((()=>this.unsafeCurrentTimeNanos()));scheduler(){return Rs(ra)}sleep(t){return ms((e=>{const r=ra.unsafeSchedule((()=>e(Ls)),t);return _s(Ds(r))}))}}const aa=()=>new sa,oa="InvalidData",ca="MissingData",ua="SourceUnavailable",la="Unsupported",fa=Symbol.for("effect/ConfigError"),ha={_tag:"ConfigError",[fa]:fa},ga=(t,e)=>{const r=Object.create(ha);return r._op="And",r.left=t,r.right=e,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),r},pa=(t,e)=>{const r=Object.create(ha);return r._op="Or",r.left=t,r.right=e,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),r},_a=(t,e,r={pathDelim:"."})=>{const n=Object.create(ha);return n._op=oa,n.path=t,n.message=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Invalid data at ${a(this.path,fe(r.pathDelim))}: "${this.message}")`}}),n},da=(t,e,r={pathDelim:"."})=>{const n=Object.create(ha);return n._op=ca,n.path=t,n.message=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Missing data at ${a(this.path,fe(r.pathDelim))}: "${this.message}")`}}),n},ma=(t,e,r,n={pathDelim:"."})=>{const i=Object.create(ha);return i._op=ua,i.path=t,i.message=e,i.cause=r,Object.defineProperty(i,"toString",{enumerable:!1,value(){return`(Source unavailable at ${a(this.path,fe(n.pathDelim))}: "${this.message}")`}}),i},ba=(t,e,r={pathDelim:"."})=>{const n=Object.create(ha);return n._op=la,n.path=t,n.message=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${a(this.path,fe(r.pathDelim))}: "${this.message}")`}}),n},ya=t(2,((t,e)=>{switch(t._op){case"And":return ga(ya(t.left,e),ya(t.right,e));case"Or":return pa(ya(t.left,e),ya(t.right,e));case oa:return _a([...e,...t.path],t.message);case ca:return da([...e,...t.path],t.message);case ua:return ma([...e,...t.path],t.message,t.cause);case la:return ba([...e,...t.path],t.message)}})),va={_tag:"Empty"},Sa=t(2,((t,e)=>{let r=(t=>Xn(t,Kn))(e),n=t;for(;"Cons"===r._tag;){const t=r.head;switch(t._tag){case"Empty":r=r.tail;break;case"AndThen":r=ti(t.first,ti(t.second,r.tail));break;case"MapName":n=ae(n,t.f),r=r.tail;break;case"Nested":n=Ut(n,t.name),r=r.tail;break;case"Unnested":if(!a(Zt(n),Bt(t.name)))return Ct(da(n,`Expected ${t.name} to be in path in ConfigProvider#unnested`));n=te(n),r=r.tail;break}}return It(n)})),wa=(t,e)=>[...t,...e],ka=Symbol.for("effect/ConfigProvider"),Na=Ie("effect/ConfigProvider"),Oa=Symbol.for("effect/ConfigProviderFlat"),Ia=t=>({[ka]:ka,pipe(){return Z(this,arguments)},...t}),Ca=t=>{const{pathDelim:e,seqDelim:r}=Object.assign({},{pathDelim:"_",seqDelim:","},t),n=()=>"undefined"!=typeof process&&"env"in process&&"object"==typeof process.env?process.env:{};return i=(t=>({[Oa]:Oa,patch:t.patch,load:(e,r,n=!0)=>t.load(e,r,n),enumerateChildren:t.enumerateChildren}))({load:(t,i,s=!0)=>{const o=(t=>a(t,fe(e)))(t),c=n();return a(o in c?Jt(c[o]):xt(),$s((()=>da(t,`Expected ${o} to exist in the process context`))),Ns((e=>ja(e,t,i,r,s))))},enumerateChildren:t=>Ds((()=>{const r=n(),i=Object.keys(r).map((t=>t.toUpperCase().split(e))),s=i.filter((e=>{for(let r=0;r<t.length;r++){const n=a(t,Yt(r)),i=e[r];if(void 0===i||n!==i)return!1}return!0})).flatMap((e=>e.slice(t.length,t.length+1)));return $n(s)})),patch:va}),Ia({load:t=>Ns(Ma(i,[],t,!1),(e=>Dt(Zt(e),{onNone:()=>Ss(da([],`Expected a single value having structure: ${t}`)),onSome:Rs}))),flattened:i});var i},Ma=(t,e,r,n)=>{const i=r;switch(i._tag){case"Constant":return Rs(se(i.value));case"Described":return Ts((()=>Ma(t,e,i.config,n)));case"Fail":return Ss(da(e,i.message));case"Fallback":return a(Ts((()=>Ma(t,e,i.first,n))),bs((r=>i.condition(r)?a(Ma(t,e,i.second,n),bs((t=>Ss(pa(r,t))))):Ss(r))));case"Lazy":return Ts((()=>Ma(t,e,i.config(),n)));case"MapOrFail":return Ts((()=>a(Ma(t,e,i.original,n),Ns(Cs((t=>a(i.mapOrFail(t),$s(ya(((t,e)=>{let r=e;if("Nested"===r._tag){const e=t.slice();for(;"Nested"===r._tag;)e.push(r.name),r=r.config;return e}return t})(e,i.original))))))))));case"Nested":return Ts((()=>Ma(t,wa(e,se(i.name)),i.config,n)));case"Primitive":return a(Sa(e,t.patch),Ns((e=>a(t.load(e,i,n),Ns((t=>{if(0===t.length){const t=a(Ht(r=e)?Jt(Qt(r)):xt(),Ft((()=>"<n/a>")));return Ss(da([],`Expected ${i.description} with name ${t}`))}var r;return Rs(t)}))))));case"Sequence":return a(Sa(e,t.patch),Ns((r=>a(t.enumerateChildren(r),Ns($a),Ns((r=>0===r.length?Ts((()=>js(Ma(t,e,i.config,!0),se))):a(Cs(r,(r=>Ma(t,qt(e,`[${r}]`),i.config,!0))),js((t=>{const e=oe(t);return 0===e.length?se([]):se(e)})))))))));case"HashMap":return Ts((()=>a(Sa(e,t.patch),Ns((e=>a(t.enumerateChildren(e),Ns((r=>a(r,Cs((r=>Ma(t,wa(e,se(r)),i.valueConfig,n))),js((t=>0===t.length?se(zn()):a(Aa(t),ae((t=>Un(ne(zt(r),t))))))))))))))));case"ZipWith":return Ts((()=>a(Ma(t,e,i.left,n),vs,Ns((r=>a(Ma(t,e,i.right,n),vs,Ns((t=>{if(Et(r)&&Et(t))return Ss(ga(r.left,t.left));if(Et(r)&&jt(t))return Ss(r.left);if(jt(r)&&Et(t))return Ss(t.left);if(jt(r)&&jt(t)){const n=a(e,fe(".")),s=Ea(e,n),[o,c]=((t,e,r,n)=>{const i=ue(r.length,(e=>e>=n.length?xt():Jt([t(e),e+1]))),s=ue(n.length,(t=>t>=r.length?xt():Jt([e(t),t+1])));return[wa(r,i),wa(n,s)]})(s,s,a(r.right,ae(It)),a(t.right,ae(It)));return a(o,ne(c),Cs((([t,e])=>a(Gs(t,e),js((([t,e])=>i.zip(t,e)))))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")}))))))))}},Ea=(t,e)=>r=>Ct(da(t,`The element at index ${r} in a sequence at path "${e}" was missing`)),ja=(t,e,r,n,i)=>i?a(((t,e)=>{const r=t.split(new RegExp(`\\s*${(t=>t.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"))(e)}\\s*`));return r})(t,n),Cs((t=>r.parse(t.trim()))),$s(ya(e))):a(r.parse(t),As({onFailure:ya(e),onSuccess:se})),Aa=t=>Object.keys(t[0]).map((e=>t.map((t=>t[e])))),$a=t=>a(Cs(t,Ja),As({onFailure:()=>[],onSuccess:re(he)}),vs,js(At)),xa=/^(\[(\d+)\])$/,Ja=t=>{const e=t.match(xa);if(null!==e){const t=e[2];return a(void 0!==t&&t.length>0?Jt(t):xt(),Lt(Ra))}return xt()},Ra=t=>{const e=Number.parseInt(t);return Number.isNaN(e)?xt():Jt(e)},Ta=Symbol.for("effect/Console"),Da=Ie("effect/Console"),Fa={[Ta]:Ta,assert:(t,...e)=>Ds((()=>{console.assert(t,...e)})),clear:Ds((()=>{console.clear()})),count:t=>Ds((()=>{console.count(t)})),countReset:t=>Ds((()=>{console.countReset(t)})),debug:(...t)=>Ds((()=>{console.debug(...t)})),dir:(t,e)=>Ds((()=>{console.dir(t,e)})),dirxml:(...t)=>Ds((()=>{console.dirxml(...t)})),error:(...t)=>Ds((()=>{console.error(...t)})),group:t=>Ds(t?.collapsed?()=>console.groupCollapsed(t?.label):()=>console.group(t?.label)),groupEnd:Ds((()=>{console.groupEnd()})),info:(...t)=>Ds((()=>{console.info(...t)})),log:(...t)=>Ds((()=>{console.log(...t)})),table:(t,e)=>Ds((()=>{console.table(t,e)})),time:t=>Ds((()=>console.time(t))),timeEnd:t=>Ds((()=>console.timeEnd(t))),timeLog:(t,...e)=>Ds((()=>{console.timeLog(t,...e)})),trace:(...t)=>Ds((()=>{console.trace(...t)})),warn:(...t)=>Ds((()=>{console.warn(...t)})),unsafe:console},Pa=Symbol.for("effect/Random"),La=Ie("effect/Random");class Ba{seed;[Pa]=Pa;PRNG;constructor(t){this.seed=t,this.PRNG=new S(t)}get next(){return Ds((()=>this.PRNG.number()))}get nextBoolean(){return js(this.next,(t=>t>.5))}get nextInt(){return Ds((()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER)))}nextRange(t,e){return js(this.next,(r=>(e-t)*r+t))}nextIntBetween(t,e){return Ds((()=>this.PRNG.integer(e-t)+t))}shuffle(t){return Ga(t,(t=>this.nextIntBetween(0,t)))}}const Ga=(t,e)=>Ts((()=>a(Ds((()=>Array.from(t))),Ns((t=>{const r=[];for(let e=t.length;e>=2;e-=1)r.push(e);return a(r,Ms((r=>a(e(r),js((e=>za(t,r-1,e)))))),ps(Te(n=t)?n:Ue(zt(n))));var n}))))),za=(t,e,r)=>{const n=t[e];return t[e]=t[r],t[r]=n,t},Ua=t=>new Ba(E(t)),qa=Symbol.for("effect/Tracer"),Wa=t=>({[qa]:qa,...t}),Ha=Ie("effect/Tracer"),Va=function(){const t="abcdef0123456789";return function(e){let r="";for(let n=0;n<e;n++)r+=t.charAt(Math.floor(16*Math.random()));return r}}();class Xa{name;parent;context;links;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(t,e,r,n,i,s){this.name=t,this.parent=e,this.context=r,this.links=n,this.startTime=i,this.kind=s,this.status={_tag:"Started",startTime:i},this.attributes=new Map,this.traceId="Some"===e._tag?e.value.traceId:Va(32),this.spanId=Va(16)}end(t,e){this.status={_tag:"Ended",endTime:t,exit:e,startTime:this.status.startTime}}attribute(t,e){this.attributes.set(t,e)}event(t,e,r){this.events.push([t,e,r??{}])}}const Ya=Wa({span:(t,e,r,n,i,s)=>new Xa(t,e,r,n,i,s),context:t=>t()}),Za=a(Ce(),Me(ea,aa()),Me(Da,Fa),Me(La,Ua(Math.random())),Me(Na,Ca()),Me(Ha,Ya)),Ka=h(Symbol.for("effect/DefaultServices/currentServices"),(()=>(t=>{const e=yi();return Vs(t,{differ:e,fork:e.empty})})(Za)));"object"==typeof process&&null!==process&&"object"==typeof process.stdout&&null!==process.stdout&&process.stdout.isTTY;const Qa=t=>Hs(Ka,(e=>t(Ee(e,Da)))),to=(...t)=>Qa((e=>e.error(...t))),eo=(...t)=>Qa((e=>e.log(...t))),ro=(...t)=>Qa((e=>e.warn(...t))),no=Symbol.for("@effect/matcher/Matcher"),io={[no]:{_input:e,_filters:e,_result:e,_return:e},_tag:"ValueMatcher",add(t){return"Right"===this.value._tag?this:"When"===t._tag&&!0===t.guard(this.provided)||"Not"===t._tag&&!1===t.guard(this.provided)?so(this.provided,It(t.evaluate(this.provided))):this},pipe(){return Z(this,arguments)}};function so(t,e){const r=Object.create(io);return r.provided=t,r.value=e,r}const ao=t=>{if("function"==typeof t)return t;if(Array.isArray(t)){const e=t.map(ao),r=e.length;return t=>{if(!Array.isArray(t))return!1;for(let n=0;n<r;n++)if(!1===e[n](t[n]))return!1;return!0}}if(null!==t&&"object"==typeof t){const e=Object.entries(t).map((([t,e])=>[t,ao(e)])),r=e.length;return t=>{if("object"!=typeof t||null===t)return!1;for(let n=0;n<r;n++){const[r,i]=e[n];if(!(r in t)||!1===i(t[r]))return!1}return!0}}return e=>e===t},oo="effect/Match/exhaustive: absurd",co=t=>so(t,Ct(t)),uo=(t,e)=>r=>r.add({_tag:"When",guard:ao(t),evaluate:e}),lo=t=>{const e=(t=>{if("ValueMatcher"===t._tag)return t.value;const e=t.cases.length;if(1===e){const e=t.cases[0];return t=>"When"===e._tag&&!0===e.guard(t)||"Not"===e._tag&&!1===e.guard(t)?It(e.evaluate(t)):Ct(t)}return r=>{for(let n=0;n<e;n++){const e=t.cases[n];if("When"===e._tag&&!0===e.guard(r))return It(e.evaluate(r));if("Not"===e._tag&&!1===e.guard(r))return It(e.evaluate(r))}return Ct(r)}})(t);if(Mt(e)){if("Right"===e._tag)return e.right;throw new Error(oo)}return t=>{const r=e(t);if("Right"===r._tag)return r.right;throw new Error(oo)}},fo=process.env.PROGRAM_NAME||"ENV-UNDEFINED",ho=t=>eo(` [DEBUG]:[${fo}] - ${t} ${(()=>{const t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}`})()}`),go=(t,e)=>co(t).pipe(uo("LOG",(()=>ho(e))),uo("WARN",(()=>(t=>ro(` [WARN]:[${fo}] - ${t}`))(e))),uo("ERROR",(()=>(t=>to(` [ERROR]:[${fo}] - ${t}`))(e))),lo);export{go as consoleProgram};
//# sourceMappingURL=index.esm.js.map
